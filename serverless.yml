service: iac-cloud-sls
frameworkVersion: '2 || 3'

provider:
  name: aws
  region: ${opt:region, 'eu-central-1'}
  lambdaHashingVersion: '20201221'

package:
  individually: true
  exclude:
    - ./**

plugins:
  - serverless-webpack
  # - serverless-python-requirements

custom:
  webpack:
    packager: npm
    excludeFiles: '**/*.py'
#   pythonRequirements:
#     dockerizePip: non-linux
#     zip: true

functions:
  helloWorldJavascript:
    runtime: nodejs14.x
    handler: src/aws/lambda/javascript/HelloWorld.handler
    events:
      - httpApi:
          path: /hello-world-js
          method: GET

  helloWorldPython:
    runtime: python3.8
    handler: src/aws/lambda/python/HelloWorld.handler
    package:
      include:
        - src/aws/lambda/python/HelloWorld.py
    events:
      - httpApi:
          path: /hello-world-python
          method: GET
